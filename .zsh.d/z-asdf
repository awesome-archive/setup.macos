#!/bin/sh
# -*- mode: sh -*-
# vim: set ft=sh :

# =========================================================
# ! WARN: DO NOT REMOVE THE “z” PREFIX!
#
# Added the “z” prefix to the filename because
# the script has to run it after Homebrew's path resolution.

ASDF="$(brew --prefix asdf)"
ASDF_SH="${ASDF}/asdf.sh"
ASDF_DIR="${ASDF}/libexec"
export ASDF_DIR
[ -f "${ASDF_SH}" ] && . "${ASDF_SH}"

if which npm > /dev/null
then
  MAJOR=$(npm -v | awk -F. '{printf "%2d", $1}')
  if [ "$MAJOR" -ge 8 ]
  then
    PATH="$PATH:$(npm bin --location=global)"
  else
    # ! TODO: Remove this fallback when no longer supported the Node.js v14.
    PATH="$PATH:$(npm bin --global)"
  fi
  export PATH
fi
